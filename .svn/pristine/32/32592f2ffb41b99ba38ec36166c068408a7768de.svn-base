{"version":3,"sources":["assets\\Script\\RankItem.js"],"names":["cc","Class","Component","name","properties","rankLabel","Label","avatarImgSprite","Sprite","icon_rank","iconSpriteFrame","type","SpriteFrame","nickLabel","topScoreLabel","levelLabel","start","init","rank","data","avatarUrl","nick","nickname","score","KVDataList","length","JSON","parse","value","undefined","level","node","active","spriteFrame","string","createImage","assetManager","loadRemote","ext","err","texture"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    name: \"RankItem\",\n    properties: {\n        rankLabel: cc.Label,\n        avatarImgSprite: cc.Sprite,\n\n        icon_rank: cc.Sprite,\n\n        iconSpriteFrame: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n\n        nickLabel: cc.Label,\n        topScoreLabel: cc.Label,\n        levelLabel: cc.Label,\n    },\n    start() {\n\n    },\n\n    init: function (rank, data) {\n        let avatarUrl = data.avatarUrl;\n        // let nick = data.nickname.length <= 10 ? data.nickname : data.nickname.substr(0, 10) + \"...\";\n        let nick = data.nickname;\n        \n        let score = 0;\n        if (data.KVDataList.length != 0) {\n            if (JSON.parse(data.KVDataList[0].value).score == undefined) {\n                score = 0;\n            }\n            else {\n                score = JSON.parse(data.KVDataList[0].value).score;\n            }\n        }\n        else {\n            score = 0;\n        }\n        let level = 0;\n        if (data.KVDataList.length != 0) {\n            if (JSON.parse(data.KVDataList[0].value).level == undefined) {\n                level = 0;\n            }\n            else {\n                level = JSON.parse(data.KVDataList[0].value).level;\n            }\n        }\n        else {\n            level = 0;\n        }\n\n        if (rank < 3) {\n            this.icon_rank.node.active = true;\n            this.icon_rank.spriteFrame = this.iconSpriteFrame[rank];\n            this.rankLabel.node.active = false;\n        }\n        else {\n            this.icon_rank.node.active = false;\n            this.rankLabel.node.active = true;\n            this.rankLabel.string = 0 == rank ? \"100+\" : (rank + 1) + \"\";\n        }\n        if (\"\" !== avatarUrl) {\n            this.createImage(avatarUrl);\n        }\n        this.nickLabel.string = nick;\n        this.topScoreLabel.string = score;\n        this.levelLabel.string = level;\n    },\n    createImage(avatarUrl) {\n        cc.assetManager.loadRemote(avatarUrl, { ext: '.jpg' }, (err, texture) => {\n            this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n        });\n    }\n\n});\n"]}