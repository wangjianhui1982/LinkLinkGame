{"version":3,"sources":["assets\\Script\\RankItem.js"],"names":["cc","Class","Component","name","properties","rankLabel","Label","avatarImgSprite","Sprite","icon_rank","iconSpriteFrame","type","SpriteFrame","nickLabel","topScoreLabel","start","init","rank","data","avatarUrl","nick","nickname","grade","KVDataList","length","value","node","active","spriteFrame","string","createImage","toString","assetManager","loadRemote","ext","err","texture"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,IAAI,EAAE,UAFD;EAGLC,UAAU,EAAE;IACRC,SAAS,EAAEL,EAAE,CAACM,KADN;IAERC,eAAe,EAAEP,EAAE,CAACQ,MAFZ;IAIRC,SAAS,EAAET,EAAE,CAACQ,MAJN;IAMRE,eAAe,EAAE;MACb,WAAS,EADI;MAEbC,IAAI,EAAEX,EAAE,CAACY;IAFI,CANT;IAWRC,SAAS,EAAEb,EAAE,CAACM,KAXN;IAYRQ,aAAa,EAAEd,EAAE,CAACM;EAZV,CAHP;EAiBLS,KAjBK,mBAiBG,CAEP,CAnBI;EAqBLC,IAAI,EAAE,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;IACxB,IAAIC,SAAS,GAAGD,IAAI,CAACC,SAArB,CADwB,CAExB;;IACA,IAAIC,IAAI,GAAGF,IAAI,CAACG,QAAhB;IACA,IAAIC,KAAK,GAAGJ,IAAI,CAACK,UAAL,CAAgBC,MAAhB,IAA0B,CAA1B,GAA8BN,IAAI,CAACK,UAAL,CAAgB,CAAhB,EAAmBE,KAAjD,GAAyD,CAArE;;IAEA,IAAIR,IAAI,GAAG,CAAX,EAAc;MACV,KAAKR,SAAL,CAAeiB,IAAf,CAAoBC,MAApB,GAA6B,IAA7B;MACA,KAAKlB,SAAL,CAAemB,WAAf,GAA6B,KAAKlB,eAAL,CAAqBO,IAArB,CAA7B;MACA,KAAKZ,SAAL,CAAeqB,IAAf,CAAoBC,MAApB,GAA6B,KAA7B;IACH,CAJD,MAKK;MACD,KAAKlB,SAAL,CAAeiB,IAAf,CAAoBC,MAApB,GAA6B,KAA7B;MACA,KAAKtB,SAAL,CAAeqB,IAAf,CAAoBC,MAApB,GAA6B,IAA7B;MACA,KAAKtB,SAAL,CAAewB,MAAf,GAAwB,KAAKZ,IAAL,GAAY,MAAZ,GAAsBA,IAAI,GAAG,CAAR,GAAa,EAA1D;IACH;;IACD,IAAI,OAAOE,SAAX,EAAsB;MAClB,KAAKW,WAAL,CAAiBX,SAAjB;IACH;;IACD,KAAKN,SAAL,CAAegB,MAAf,GAAwBT,IAAxB;IACA,KAAKN,aAAL,CAAmBe,MAAnB,GAA4BP,KAAK,CAACS,QAAN,EAA5B;EACH,CA1CI;EA2CLD,WA3CK,uBA2COX,SA3CP,EA2CkB;IAAA;;IACnBnB,EAAE,CAACgC,YAAH,CAAgBC,UAAhB,CAA2Bd,SAA3B,EAAsC;MAAEe,GAAG,EAAE;IAAP,CAAtC,EAAuD,UAACC,GAAD,EAAMC,OAAN,EAAkB;MACrE,KAAI,CAAC7B,eAAL,CAAqBqB,WAArB,GAAmC,IAAI5B,EAAE,CAACY,WAAP,CAAmBwB,OAAnB,CAAnC;IACH,CAFD;EAGH;AA/CI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    name: \"RankItem\",\n    properties: {\n        rankLabel: cc.Label,\n        avatarImgSprite: cc.Sprite,\n\n        icon_rank: cc.Sprite,\n\n        iconSpriteFrame: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n\n        nickLabel: cc.Label,\n        topScoreLabel: cc.Label,\n    },\n    start() {\n\n    },\n\n    init: function (rank, data) {\n        let avatarUrl = data.avatarUrl;\n        // let nick = data.nickname.length <= 10 ? data.nickname : data.nickname.substr(0, 10) + \"...\";\n        let nick = data.nickname;\n        let grade = data.KVDataList.length != 0 ? data.KVDataList[0].value : 0;\n\n        if (rank < 3) {\n            this.icon_rank.node.active = true;\n            this.icon_rank.spriteFrame = this.iconSpriteFrame[rank];\n            this.rankLabel.node.active = false;\n        }\n        else {\n            this.icon_rank.node.active = false;\n            this.rankLabel.node.active = true;\n            this.rankLabel.string = 0 == rank ? \"100+\" : (rank + 1) + \"\";\n        }\n        if (\"\" !== avatarUrl) {\n            this.createImage(avatarUrl);\n        }\n        this.nickLabel.string = nick;\n        this.topScoreLabel.string = grade.toString();\n    },\n    createImage(avatarUrl) {\n        cc.assetManager.loadRemote(avatarUrl, { ext: '.jpg' }, (err, texture) => {\n            this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n        });\n    }\n\n});\n"]}